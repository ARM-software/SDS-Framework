{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "properties": {
    "sds": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the Synchronous Data Stream (SDS)"
        },
        "description": {
          "type": "string",
          "description": "Additional descriptive text (optional)"
        },
        "frequency": {
          "type": "number",
          "description": "Capture frequency of the SDS"
        },
        "tick-frequency": {
          "type": "number",
          "description": "Tick frequency of the timestamp value (optional); default: 1000 for 1 milli-second interval",
          "default": 1000
        },
        "content": {
          "type": "array",
          "description": "List of values captured (see below)",
          "items": {
            "type": "object",
            "properties": {
              "value": {
                "type": "string",
                "description": "Name of the value"
              },
              "type": {
                "type": "string",
                "description": "Data type of the value"
              },
              "offset": {
                "type": "number",
                "description": "Offset of the value (optional); default: 0",
                "default": 0
              },
              "scale": {
                "type": "number",
                "description": "Scale factor of the value (optional); default: 1.0",
                "default": 1.0
              },
              "unit": {
                "type": "string",
                "description": "Physical unit of the value (optional); default: no units"
              },
              "image": {
                "type": "object",
                "description": "Image stream metadata, applicable when the value represents an image frame",
                "properties": {
                  "pixel_format": {
                    "type": "string",
                    "description": "Pixel format identifier.",
                    "enum": [
                      "RAW8",
                      "RAW10",
                      "RGB565",
                      "RGB888",
                      "NV12",
                      "NV21",
                      "I420",
                      "NV16",
                      "NV61",
                      "YUYV",
                      "UYVY",
                      "YUV422P",
                      "YUV444",
                      "YUV444P"
                    ]
                  },
                  "width": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Number of pixels per row."
                  },
                  "height": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Number of rows."
                  },
                  "stride_bytes": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Bytes per row for single-plane formats."
                  },
                  "planes": {
                    "type": "array",
                    "description": "Per-plane stride (for multi-plane formats).",
                    "minItems": 2,
                    "maxItems": 3,
                    "items": {
                      "type": "object",
                      "properties": {
                        "stride_bytes": {
                          "type": "integer",
                          "minimum": 1,
                          "description": "Bytes per row for this plane."
                        }
                      },
                      "required": ["stride_bytes"]
                    }
                  }
                },
                "required": ["pixel_format", "width", "height"],
                "oneOf": [
                  {
                    "required": ["stride_bytes"],
                    "not": { "required": ["planes"] }
                  },
                  {
                    "required": ["planes"],
                    "not": { "required": ["stride_bytes"] }
                  }
                ]
              }
            },
            "required": ["value", "type"]
          }
        }
      },
      "required": ["name", "frequency", "content"]
    }
  },
  "required": ["sds"]
}
