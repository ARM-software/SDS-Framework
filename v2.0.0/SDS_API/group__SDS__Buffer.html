<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Group SDS_Buffer - SDS-Framework</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Group SDS_Buffer";
        var mkdocs_page_input_path = "SDS_API/group__SDS__Buffer.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> SDS-Framework
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../template.html">SDS Template Application</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../sdsio.html">SDSIO Interface</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../theory.html">Theory of Operation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="modules.html">API Modules</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SDS-Framework</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Group SDS_Buffer</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ARM-software/SDS-Framework/edit/main/documentation/SDS_API/group__SDS__Buffer.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="group-sds_buffer">Group SDS_Buffer</h1>
<p><a href="modules.html"><strong>Modules</strong></a> <strong>&gt;</strong> <a href="group__SDS__Buffer.html"><strong>SDS_Buffer</strong></a></p>
<p>sds_buffer.h <em>: SDS circular buffer handling for data streams</em><a href="#detailed-description">More...</a></p>
<h2 id="modules">Modules</h2>
<table>
<thead>
<tr>
<th style="text-align: right;">Type</th>
<th style="text-align: left;">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">module</td>
<td style="text-align: left;"><a href="group__SDS__Buffer__Event__Codes.html"><strong>Event Codes</strong></a> <br><em>SDS Buffer Event Codes.</em></td>
</tr>
<tr>
<td style="text-align: right;">module</td>
<td style="text-align: left;"><a href="group__SDS__Buffer__Return__Codes.html"><strong>Function Return Codes</strong></a> <br><em>SDS Buffer Function Return Codes.</em></td>
</tr>
</tbody>
</table>
<h2 id="public-types">Public Types</h2>
<table>
<thead>
<tr>
<th style="text-align: right;">Type</th>
<th style="text-align: left;">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">typedef void(*</td>
<td style="text-align: left;"><a href="#typedef-sdsbufferevent_t"><strong>sdsBufferEvent_t</strong></a>  <br><em>Callback function for SDS circular buffer event handling.</em></td>
</tr>
<tr>
<td style="text-align: right;">typedef void *</td>
<td style="text-align: left;"><a href="#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a>  <br><em>Handle to SDS circular buffer.</em></td>
</tr>
</tbody>
</table>
<h2 id="public-functions">Public Functions</h2>
<table>
<thead>
<tr>
<th style="text-align: right;">Type</th>
<th style="text-align: left;">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">int32_t</td>
<td style="text-align: left;"><a href="#function-sdsbufferclear"><strong>sdsBufferClear</strong></a> (<a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> id) <br><em>Clear SDS buffer stream data.</em></td>
</tr>
<tr>
<td style="text-align: right;">int32_t</td>
<td style="text-align: left;"><a href="#function-sdsbufferclose"><strong>sdsBufferClose</strong></a> (<a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> id) <br><em>Close SDS buffer stream.</em></td>
</tr>
<tr>
<td style="text-align: right;">int32_t</td>
<td style="text-align: left;"><a href="#function-sdsbuffergetcount"><strong>sdsBufferGetCount</strong></a> (<a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> id) <br><em>Get data count in SDS buffer stream.</em></td>
</tr>
<tr>
<td style="text-align: right;"><a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a></td>
<td style="text-align: left;"><a href="#function-sdsbufferopen"><strong>sdsBufferOpen</strong></a> (void * buf, uint32_t buf_size, uint32_t threshold_low, uint32_t threshold_high) <br><em>Open SDS buffer stream.</em></td>
</tr>
<tr>
<td style="text-align: right;">int32_t</td>
<td style="text-align: left;"><a href="#function-sdsbufferread"><strong>sdsBufferRead</strong></a> (<a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> id, void * buf, uint32_t buf_size) <br><em>Read data from SDS buffer stream.</em></td>
</tr>
<tr>
<td style="text-align: right;">int32_t</td>
<td style="text-align: left;"><a href="#function-sdsbufferregisterevents"><strong>sdsBufferRegisterEvents</strong></a> (<a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> id, <a href="group__SDS__Buffer.html#typedef-sdsbufferevent_t"><strong>sdsBufferEvent_t</strong></a> event_cb, uint32_t event_mask, void * event_arg) <br><em>Register SDS buffer stream event callback function.</em></td>
</tr>
<tr>
<td style="text-align: right;">int32_t</td>
<td style="text-align: left;"><a href="#function-sdsbufferwrite"><strong>sdsBufferWrite</strong></a> (<a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> id, const void * buf, uint32_t buf_size) <br><em>Write data to SDS buffer stream.</em></td>
</tr>
</tbody>
</table>
<h2 id="detailed-description">Detailed Description</h2>
<p>The <strong>SDS</strong> circular <strong>Buffer</strong> provides an interface for managing circular buffer streams used for efficient data transfer between software components. It includes functions for opening, closing, reading, writing, clearing, and monitoring buffer states using event callbacks.</p>
<p>Each buffer stream is represented by an identifier of type <a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a>, which is obtained via <a href="group__SDS__Buffer.html#function-sdsbufferopen"><strong>sdsBufferOpen()</strong></a> and used in subsequent API calls to refer to the corresponding buffer instance.</p>
<p>The buffer operates as a circular FIFO (first-in, first-out) queue. Data written to the buffer via <a href="group__SDS__Buffer.html#function-sdsbufferwrite"><strong>sdsBufferWrite()</strong></a> is stored until read by <a href="group__SDS__Buffer.html#function-sdsbufferread"><strong>sdsBufferRead()</strong></a> or until the buffer is cleared or closed. The buffer supports thresholds (threshold_low and threshold_high) for monitoring usage levels and triggering user-defined events.</p>
<p><strong>Thread</strong> <strong>Safety</strong> </p>
<p>The SDS Buffer API is partially thread-safe, with the following constraints:</p>
<p>Thread-safe operations:</p>
<ul>
<li><a href="group__SDS__Buffer.html#function-sdsbufferread"><strong>sdsBufferRead()</strong></a></li>
<li><a href="group__SDS__Buffer.html#function-sdsbufferwrite"><strong>sdsBufferWrite()</strong></a></li>
<li><a href="group__SDS__Buffer.html#function-sdsbuffergetcount"><strong>sdsBufferGetCount()</strong></a></li>
</ul>
<p>These functions may be safely called concurrently, provided they operate on the same buffer instance (<a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a>). This allows safe producer-consumer models where one thread writes and another reads from the same buffer.</p>
<p>Non-thread-safe operations:</p>
<ul>
<li><a href="group__SDS__Buffer.html#function-sdsbufferopen"><strong>sdsBufferOpen()</strong></a></li>
<li><a href="group__SDS__Buffer.html#function-sdsbufferclose"><strong>sdsBufferClose()</strong></a></li>
<li><a href="group__SDS__Buffer.html#function-sdsbufferclear"><strong>sdsBufferClear()</strong></a></li>
<li><a href="group__SDS__Buffer.html#function-sdsbufferregisterevents"><strong>sdsBufferRegisterEvents()</strong></a></li>
</ul>
<p>These functions must not be called concurrently with each other or with <a href="group__SDS__Buffer.html#function-sdsbufferread"><strong>sdsBufferRead()</strong></a> or <a href="group__SDS__Buffer.html#function-sdsbufferwrite"><strong>sdsBufferWrite()</strong></a> for the same buffer. Doing so can lead to undefined behavior or data corruption. </p>
<h2 id="public-types-documentation">Public Types Documentation</h2>
<h3 id="typedef-sdsbufferevent_t">typedef sdsBufferEvent_t</h3>
<p><em>Callback function for SDS circular buffer event handling.</em> </p>
<pre><code>typedef void(* sdsBufferEvent_t) (sdsBufferId_t id, uint32_t event, void *arg);
</code></pre>
<p>This function is registered by passing a pointer to it as a parameter to the <a href="group__SDS__Buffer.html#function-sdsbufferregisterevents"><strong>sdsBufferRegisterEvents</strong></a> function. It is invoked when the circular buffer either reaches or exceeds the high data threshold or falls to or below the low data threshold. The high and low data thresholds are configured using the <a href="group__SDS__Buffer.html#function-sdsbufferopen"><strong>sdsBufferOpen</strong></a> function.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>id</code> <a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> handle to SDS buffer stream </li>
<li><code>event</code> event code (see <a href="group__SDS__Buffer__Event__Codes.html"><strong>Event Codes</strong></a>) </li>
<li><code>arg</code> pointer to argument registered with <a href="group__SDS__Buffer.html#function-sdsbufferregisterevents"><strong>sdsBufferRegisterEvents</strong></a> </li>
</ul>
<hr>

<h3 id="typedef-sdsbufferid_t">typedef sdsBufferId_t</h3>
<p><em>Handle to SDS circular buffer.</em> </p>
<pre><code>typedef void* sdsBufferId_t;
</code></pre>
<p>This <em>pointer</em> defines the handle to SDS circular buffer. It is used to identify a circular buffer across the different functions. </p>
<hr>
<h2 id="public-functions-documentation">Public Functions Documentation</h2>
<h3 id="function-sdsbufferclear">function sdsBufferClear</h3>
<p><em>Clear SDS buffer stream data.</em> </p>
<pre><code>int32_t sdsBufferClear (
    sdsBufferId_t id
) 
</code></pre>
<p>Clears any data from the SDS circular buffer and resets the circular buffer to empty state.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>id</code> <a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> handle to SDS buffer stream </li>
</ul>
<p><strong>Returns:</strong></p>
<p>SDS_BUFFER_OK on success or a negative value on error (see <a href="group__SDS__Buffer__Return__Codes.html"><strong>Function Return Codes</strong></a>) </p>
<hr>

<h3 id="function-sdsbufferclose">function sdsBufferClose</h3>
<p><em>Close SDS buffer stream.</em> </p>
<pre><code>int32_t sdsBufferClose (
    sdsBufferId_t id
) 
</code></pre>
<p>Closes the SDS circular buffer when read or write operations are no longer required.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>id</code> <a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> handle to SDS buffer stream </li>
</ul>
<p><strong>Returns:</strong></p>
<p>SDS_BUFFER_OK on success or a negative value on error (see <a href="group__SDS__Buffer__Return__Codes.html"><strong>Function Return Codes</strong></a>) </p>
<hr>

<h3 id="function-sdsbuffergetcount">function sdsBufferGetCount</h3>
<p><em>Get data count in SDS buffer stream.</em> </p>
<pre><code>int32_t sdsBufferGetCount (
    sdsBufferId_t id
) 
</code></pre>
<p>Retrieves the number of data bytes currently available in the SDS circular buffer.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>id</code> <a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> handle to SDS buffer stream </li>
</ul>
<p><strong>Returns:</strong></p>
<p>number of data bytes available in buffer stream or a negative value on error (see <a href="group__SDS__IO__Return__Codes.html"><strong>Function Return Codes</strong></a>) </p>
<hr>

<h3 id="function-sdsbufferopen">function sdsBufferOpen</h3>
<p><em>Open SDS buffer stream.</em> </p>
<pre><code>sdsBufferId_t sdsBufferOpen (
    void * buf,
    uint32_t buf_size,
    uint32_t threshold_low,
    uint32_t threshold_high
) 
</code></pre>
<p>Opens the SDS circular buffer for read or write operations. The function returns the handle to the SDS buffer stream; if the buffer could not be opened, it returns NULL.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>buf</code> pointer to buffer for stream </li>
<li><code>buf_size</code> buffer size in bytes </li>
<li><code>threshold_low</code> data low threshold in bytes </li>
<li><code>threshold_high</code> data high threshold in bytes </li>
</ul>
<p><strong>Returns:</strong></p>
<p><a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> Handle to SDS buffer stream, or NULL if operation failed </p>
<hr>

<h3 id="function-sdsbufferread">function sdsBufferRead</h3>
<p><em>Read data from SDS buffer stream.</em> </p>
<pre><code>int32_t sdsBufferRead (
    sdsBufferId_t id,
    void * buf,
    uint32_t buf_size
) 
</code></pre>
<p>Attempts to read up to <code>buf_size</code> bytes of data from the SDS circular buffer into a <code>buf</code>. If sufficient data is available, the requested number of bytes will be read. If only partial data is available, only the available bytes will be read. On success, the function returns the number of bytes actually read or 0 if SDS circular buffer is empty.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>id</code> <a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> handle to SDS buffer stream </li>
<li><code>buf</code> pointer to buffer for data to read </li>
<li><code>buf_size</code> buffer size in bytes </li>
</ul>
<p><strong>Returns:</strong></p>
<p>number of data bytes successfully read or a negative value on error (see <a href="group__SDS__IO__Return__Codes.html"><strong>Function Return Codes</strong></a>) </p>
<hr>

<h3 id="function-sdsbufferregisterevents">function sdsBufferRegisterEvents</h3>
<p><em>Register SDS buffer stream event callback function.</em> </p>
<pre><code>int32_t sdsBufferRegisterEvents (
    sdsBufferId_t id,
    sdsBufferEvent_t event_cb,
    uint32_t event_mask,
    void * event_arg
) 
</code></pre>
<p>Registers a <a href="group__SDS__Buffer.html#typedef-sdsbufferevent_t"><strong>sdsBufferEvent_t</strong></a> callback function to handle threshold events for the specified SDS buffer.</p>
<p>The <code>event_mask</code> parameter specifies which buffer events should trigger the callback. It is a bitmask composed of values from the <a href="group__SDS__Buffer__Event__Codes.html"><strong>Event Codes</strong></a> enumeration:</p>
<ul>
<li><a href="group__SDS__Buffer__Event__Codes.html#define-sds_buffer_event_data_low"><strong>SDS_BUFFER_EVENT_DATA_LOW</strong></a></li>
<li><a href="group__SDS__Buffer__Event__Codes.html#define-sds_buffer_event_data_high"><strong>SDS_BUFFER_EVENT_DATA_HIGH</strong></a></li>
</ul>
<p>When an event matching the mask occurs, the registered <code>event_cb</code> function is invoked with <code>event_arg</code> as its context.</p>
<p>If <code>event_cb</code> is NULL, any previously registered callback for the specified buffer is unregistered.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>id</code> <a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> handle to SDS buffer stream </li>
<li><code>event_cb</code> pointer to <a href="group__SDS__Buffer.html#typedef-sdsbufferevent_t"><strong>sdsBufferEvent_t</strong></a> callback function, NULL to un-register </li>
<li><code>event_mask</code> event mask </li>
<li><code>event_arg</code> pointer to event argument </li>
</ul>
<p><strong>Returns:</strong></p>
<p>SDS_BUFFER_OK on success or a negative value on error (see <a href="group__SDS__Buffer__Return__Codes.html"><strong>Function Return Codes</strong></a>) </p>
<hr>

<h3 id="function-sdsbufferwrite">function sdsBufferWrite</h3>
<p><em>Write data to SDS buffer stream.</em> </p>
<pre><code>int32_t sdsBufferWrite (
    sdsBufferId_t id,
    const void * buf,
    uint32_t buf_size
) 
</code></pre>
<p>Attempts to write up to <code>buf_size</code> bytes of data from <code>buf</code> to the SDS circular buffer. If sufficient space is available in the buffer, all data will be written. If only partial space is available, only the number of bytes that fit will be written. No data is overwritten. On success, the function returns the number of bytes actually written.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>id</code> <a href="group__SDS__Buffer.html#typedef-sdsbufferid_t"><strong>sdsBufferId_t</strong></a> handle to SDS buffer stream </li>
<li><code>buf</code> pointer to buffer with data to write </li>
<li><code>buf_size</code> buffer size in bytes </li>
</ul>
<p><strong>Returns:</strong></p>
<p>number of data bytes successfully written or a negative value on error (see <a href="group__SDS__Buffer__Return__Codes.html"><strong>Function Return Codes</strong></a>) </p>
<hr>

<hr />
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ARM-software/SDS-Framework" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
